# alekseybb197_platform
Kubernetes_controllers 2020.08.20
1.создал кластер kind 3 мастера и 3 ноды
2.создал rs для запуска alekseybb/fronend и применил. нашел что не хватает секции selector, все исправил, запустил
3.увеличил число реплик, проверил что удаляю -снова стартуют. настроил rs на запуск 3-х реплик сразу
4.перетегировал образ сразу и v0.0.2 и на v0.0.1, поменял манифест, применил
5.убедился что ничего не обновляется, пока не удалить старое, потому что rs лишь следит за числом реплик
6.собрал paymentservice, тегировал как надо, закинул в реестр,создал для него rs на 3 реплики, применил
7.сздал deployment для paymentservice, применил и убедился, что rs он сам создает
8.проверил обновление до версии v0.0.2 и проверил откат через rollout undo
9.составил имитационные deployment-ы для bg и reverse rolling update. проверил их работу
10.создал манифест для frontend с проверкой готовности readinessProbe. проверил. испортил и снова проверил. поймал 404
11.нашел и применил успешно daemonset с node-exporter - очень много прочитал с 127.0.0.1:9100
12.сменил секцию tolerations и таки загнал его на все ноды

alekseybb197 Platform repository
2020.08.09
1. Создал образ с апачем, запускающемся на порту 8000, с uid 1001 и gid 1001, с корнем в /app
2. Поместил его в докер хаб как alekseybb/webapp
3. Проверил его запуск в кубере.
4. Настроил инит-контейнер для размещения требуемого индекса, связал все общим томом и проверил работоспособность.
5. Выташил фронт от микросервисного приложения, собрал его как есть и разместил у как alekseybb/frontend
6. Проверил его работу - не работает!
7. Проанализировал логи - требует переменных окружения.
8. Выяснил, что просто добавление одной не исправляет - требует следующей.
9. Вставил в манифест все переменные окружения. Проверил - все взлетело.
